#!/usr/bin/ruby

begin
  # input file as the first argument 
  File.open(ARGV[0], "r") do |file|
   
    # read contents of the file
    contents = file.read
    
    # IP regex
    pattern = /^(?:Nmap scan report for )((?:\d{1,3}\.){3}\d{1,3})/

    # compare results:
    pattern =~ contents

    # if match then $1 is defined, read $1
    puts %!Matching IP address: #{$1}! if $1
  end

rescue Exception => e
  puts e
end
